<div class="border-1 p-3 border-200 border-round">
  <form [formGroup]="form">
    <div class="guide-header text-left">
      <p-accordion class="p-4">
        <p-accordionTab header="Orientações">
          <div class="w-full border-1 border-200 p-4 border-round">
            <p>
              Aqui você pode inserir diferentes tipos de documentos, como
              vídeos, PDFs ou arquivos Excel. Para garantir que tudo ocorra de
              maneira eficiente, siga estas orientações:
            </p>

            <span class="l-form-header py-2 px-1">Selecione o arquivo:</span>
            <p>
              Clique no botão "Anexar" para procurar e selecionar o documento
              que deseja enviar. Verifique se o documento está em um formato
              compatível.
            </p>
            <span class="l-form-header py-2 px-1"
              >Descreva o resumo do documento:</span
            >
            <p>
              Digite uma breve descrição ou resumo do documento. Isso ajudará
              outros usuários a entenderem o conteúdo do arquivo sem precisar
              abri-lo. Inclua informações-chave, como o assunto principal ou as
              principais conclusões do documento.
            </p>
            <span class="l-form-header py-2 px-1">Insira tags relevantes:</span>
            <p>
              Digite palavras-chave ou tags que descrevam o conteúdo do
              documento. As tags facilitam a busca e a categorização dos
              documentos. Separe as tags com vírgulas e use palavras que sejam
              relevantes e específicas.
            </p>
            <span class="l-form-header py-2 px-1">Revisão final:</span>
            <p>
              Antes de enviar o documento, verifique se todas as informações
              estão corretas. Certifique-se de que o arquivo selecionado é o
              correto e revise a descrição e as tags para garantir que elas
              reflitam adequadamente o conteúdo do documento.
            </p>
          </div>
        </p-accordionTab>
      </p-accordion>
    </div>

    <div class="mb-2 w-full text-left">
      <div class="flex w-full">
        <label class="mb-1 text-500">Diretório</label>
      </div>

      <div class="p-fluid flex mb-2">
        <p-dropdown
          [filter]="true"
          [showClear]="true"
          [options]="scopes"
          class="w-full border-cyan-100"
          [ngClass]="{
            'ng-dirty ng-invalid':
              form.get('nuxeoPathId')?.invalid &&
              (form.get('nuxeoPathId')?.dirty || form.get('nuxeoPathId')?.touched)
          }"
          formControlName="nuxeoPathId"
          placeholder="Selecione o local"
          optionLabel="scope"
          optionValue="id"
        >
          <ng-template let-item pTemplate="selectedItem">
            <span>{{ item.id }} — {{ item.scope | wordConverter }}</span>
          </ng-template>

          <ng-template let-item pTemplate="item">
            <span>{{ item.id }} — {{ item.scope | wordConverter }}</span>
          </ng-template>
        </p-dropdown>
      </div>

      <div class="flex w-full">
        <label class="mb-1 text-500">Título</label>
      </div>

      <input
        pInputText
        class="p-inputtext-sm p-inputtext-outlined"
        formControlName="title"
      />
    </div>

    <div class="flex">
      <label class="mb-1 text-500">Selecione o arquivo</label>
    </div>

    <div class="mb-2">
      <p-fileUpload
        #fileUpload
        id="float-fileUpload"
        chooseLabel="Anexar"
        cancelLabel="Cancelar"
        class="col-12 text-left"
        name="demo[]"
        [multiple]="false"
        accept="application/*,.csv, image/*, video/*"
        (onSelect)="onShowUpload()"
        [customUpload]="true" 
        [showUploadButton]="false"
      >
        <ng-template pTemplate="content">
          <div
            *ngIf="material && hasDocuments"
            class="flex justify-content-between text-sm"
          >
            <div>
              <div class="p-1">
                <div class="font-bold">Nome do arquivo:</div>
                {{ material?.properties["file:content"].name }}
              </div>

              <div class="p-1">
                <div class="font-bold">Ultima atualização em:</div>
                {{ material?.lastModified | date : "short" }}
              </div>
            </div>

            <div>
              <button
                pButton
                icon="pi pi-download"
                class="p-button- p-button-primary p-button-sm mr-1"
                (click)="onDownload()"
              ></button>

              <button
                pButton
                icon="pi pi-trash"
                (click)="onRemove()"
                class="p-button- p-button-danger p-button-sm"
              ></button>
            </div>
          </div>
        </ng-template>
      </p-fileUpload>
    </div>
    <div class="mb-3">
      <div class="flex">
        <label class="mb-1 text-500">Insira as tags</label>
      </div>

      <lib-tag-input
        [whitelist]="whitelist"
        [changedTags]="_changedTags"
        (characterInputed)="handleSearchTags($event)"
        (tagsEmitter)="handleSearchTags($event)"
      ></lib-tag-input>
    </div>

    <div class="flex">
      <label class="mb-1 text-500">Descrição do documento</label>
    </div>
    
    <textarea
      class="w-full pl-3"
      formControlName="description"
      rows="5"
      cols="30"
      pInputTextarea
    ></textarea>
  </form>
</div>
